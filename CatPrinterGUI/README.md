# Cat Printer GUI

一个美观的图形界面应用程序，用于控制MXW01热敏打印机，替代原有的命令行界面。

## 功能特性

### 🎨 美观的现代化界面
- Material Design风格的UI
- 响应式布局
- 实时连接状态显示
- 彩色日志输出

### 🔗 连接管理
- 一键扫描并连接打印机
- 实时状态监控
- 蓝牙连接状态可视化

### 🖨️ 打印功能
- 图像文件选择和预览
- 打印强度调节（0-100%）
- 打印模式选择：
  - 1bpp - 单色模式（快速，低质量）
  - 4bpp - 16级灰度（较慢，高质量）
- 抖动算法选择：
  - 无抖动
  - Bayer 2x2, 4x4, 8x8, 16x16
  - Floyd-Steinberg

### 📄 纸张控制
- 纸张进纸控制
- 纸张回缩控制
- 可调节行数

### 📊 设备信息
- 电池电量查询
- 打印机状态监控
- 设备详细信息
- 打印类型查询

### 📝 实时日志
- 彩色日志显示
- 自动滚动功能
- 时间戳记录
- 手动清除日志

## 系统要求

- Windows 10 版本 19041 或更高版本
- .NET 8.0 Runtime
- 支持Bluetooth Low Energy (BLE)的蓝牙适配器
- MXW01热敏打印机

## 安装和运行

### 方式一：使用预编译版本（推荐）

**这是最简单的方式，无需安装任何依赖：**

1. 进入项目根目录的 `Releases` 文件夹
2. 双击 `CatPrinterGUI.exe` 即可运行
3. 无需安装 .NET 运行时，这是一个完全独立的可执行文件

**优点：**
- ✅ 无需安装 .NET SDK 或运行时
- ✅ 开箱即用
- ✅ 包含所有必需的依赖项

### 方式二：从源码构建

如果您想从源码构建或修改代码：

1. 确保安装 .NET 8.0 SDK
2. 克隆或下载项目
3. 在 `CatPrinterGUI` 目录中运行：

```bash
dotnet build
dotnet run
```

### 生成新的独立可执行文件

如果您修改了代码并想生成新的可执行文件：

```bash
dotnet publish -c Release -r win-x64 --self-contained true -p:PublishSingleFile=true -p:EnableCompressionInSingleFile=true -p:EnableWindowsTargeting=true
```

编译后的文件位于：`bin/Release/net8.0-windows10.0.19041.0/win-x64/publish/CatPrinterGUI.exe`

## 使用方法

### 基本打印流程

1. **连接打印机**
   - 点击"🔍 Scan & Connect"按钮
   - 确保打印机已开机并在范围内
   - 等待连接成功提示

2. **选择图像**
   - 点击"Browse..."按钮选择要打印的图像
   - 支持常见图像格式：JPG, PNG, BMP, GIF

3. **设置打印参数**
   - 使用滑块调节打印强度
   - 选择打印模式（单色或灰度）
   - 选择抖动算法

4. **执行打印**
   - 点击"🖨️ Print Image"开始打印
   - 观察日志窗口中的进度信息

### 高级功能

- **纸张控制**：设置进纸/回缩的行数
- **设备监控**：查看电池电量和打印机状态
- **故障排除**：使用"Device Info"功能获取详细信息

## 界面预览

应用程序包含以下主要区域：

- **顶部状态栏**：显示应用程序标题和连接状态
- **左侧控制面板**：
  - 连接管理
  - 打印设置
  - 纸张控制
  - 设备信息
- **右侧日志面板**：实时显示操作日志和状态信息

## 注意事项

- 确保打印机有足够的电池电量
- 建议在打印前测试小图像
- 高质量打印（4bpp）需要更长时间
- 确保蓝牙连接稳定，避免在打印过程中断开

## 技术细节

- 基于.NET 8.0和WPF框架
- 使用InTheHand.BluetoothLE库进行蓝牙通信
- 使用SixLabors.ImageSharp进行图像处理
- 继承原有核心功能，代码模块化设计

## 许可证

继承原项目的许可证条款。

## 贡献

欢迎提交问题和改进建议！